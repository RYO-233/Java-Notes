[toc]

# 代码块

## 代码块的介绍

> **代码块(初始化块)：**
> 	属于类中的成员(即，类中的一部分)。类似于方法，将逻辑语句封装在方法体中，通过 `{}` 包围起来。
>
> ​	但与方法不同的是，代码块没有方法名、返回类型、参数，只有方法体。
> ​	而且不用通过对象或类显式调用，而是加载类时 / 创建对象时隐式调用。

## 代码块的语法

```java
[修饰符] {
	blocks;
}
```

### 注意：

1. 修饰符可选(static / ‘’)。
2. 代码块分为两类：
    `static` 修饰的为 *静态代码块*。
    没有 `static` 修饰的为 *普通代码块 / 非静态代码块*。
3. `blocks` 可以为任何逻辑语句。
4. `;` 可以省略。

## 代码块的好处

1. 相当于另外一种形式的构造器(对构造器的补充机制)，可以做初始化的操作。
2. 把相同的语句，放入到一个代码块中，当不管调用哪个构造器，创建对象，都会先调用代码块的内容。

## 代码块的细节

1. __`static` 代码块(静态代码块)：__作用就是对类进行初始化，且*__<u>随着类的加载而加载，并只会执行一次</u>__*。
    __普通代码块：__每创建一个对象，都会调用一次普通代码块。
2. __类加载的时机：__
    1. 创建对象实例时(`new`)。
    2. 创建子类对象实例时，父类也会被加载。
    3. 使用类的静态成员(静态属性，静态方法)时。
3. 普通代码块，在创建对象实例时，会被隐式调用。创建一次，就会调用一次。
    如果只是使用类的静态成员时，普通代码块不会执行。
4. **创建一个对象时，在类中的调用顺序：**
    1. 调用*<u>静态代码块和静态属性的初始化。</u>*(静态代码块和静态属性初始化调用的优先级一样。如果有多个静态代码块和多个静态变量初始化，则按他们定义的顺序调用)
    2. 调用*<u>普通代码块和普通属性的初始化。</u>*(普通代码块和普通属性初始化调用的优先级一样。如果有多个普通代码块和多个普通变量初始化，则按他们定义的顺序调用)
    3. 调用*<u>构造方法。</u>*
5. 构造器的最前面隐含了 `super()` 和调用普通代码块。
    静态代码块、静态成员的初始化，在类的加载时已经执行完毕，因此优先于构造器和普通代码块的执行。
6. **<u>当有继承关系时，创建子类对象时，在类中的调用顺序：</u>**
    1. 父类的静态代码块和静态属性(优先级一样，按定义顺序执行)。
    2. 子类的静态代码块和静态属性(优先级一样，按定义顺序执行)。
    3. 父类的普通代码块和普通属性的初始化(优先级一样，按定义顺序执行)。
    4. 父类的构造方法。
    5. 子类的普通代码块和普通属性的初始化(优先级一样，按定义顺序执行)。
    6. 子类的构造方法。
7. **<u>静态代码块只能直接调用静态成员(静态属性和静态方法)</u>**，普通代码块可以调用任意成员。



